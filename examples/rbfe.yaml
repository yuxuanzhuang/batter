version: 1
protocol: rbfe
backend: local

create:
  system_name: adrb2_A
  protein_input: reference/adrb2_A.pdb
  system_input: reference/adrb2_A_membrane.pdb
  system_coordinate: reference/adrb2_A_membrane.rst7
  protein_align: name CA and resid 50 to 200
  ligand_input: reference/ligands_dict.json
  ligand_ff: openff-2.3.0
  retain_lig_prot: true
  param_charge: "openff-gnn-am1bcc-1.0.0.pt"

  anchor_atoms:
    - "name CA and resid 113"
    - "name CA and resid 82"
    - "name CA and resid 316"
  lipid_mol: ["POPC"]
  overwrite: false
  receptor_ff: protein.ff14SB
  lipid_ff: lipid21
  solv_shell: 15.0
  water_model: TIP3P

run:
  output_folder: RBFE_simulations
  only_fe_preparation: false
  dry_run: false
  run_id: rep1
  max_workers: 8
  on_failure: prune
  slurm:
    partition: rondror

rbfe:
  mapping: konnektor
  konnektor_layout: minimalspanningtree
  both_directions: false

fe_sim:
  # 24 windows for Lambda schedule required for RBFE.
  lambdas: [0.        , 0.04347826, 0.08695652, 0.13043478, 0.17391304,
      0.2173913 , 0.26086957, 0.30434783, 0.34782609, 0.39130435,
      0.43478261, 0.47826087, 0.52173913, 0.56521739, 0.60869565,
      0.65217391, 0.69565217, 0.73913043, 0.7826087 , 0.82608696,
      0.86956522, 0.91304348, 0.95652174, 1.        ]
  x_n_steps: 300000
  eq_steps: 0
  cut: 9.0
  barostat: 2
  hmr: no
  dt: 0.002
  buffer_z: 20.0
  temperature: 298.15
