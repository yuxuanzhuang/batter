# Amber Template Usage

This directory hosts static AMBER input templates consumed by modules under
`batter/_internal`.  The table below summarizes where each template is referenced.

## Actively used templates

| Stage / Component | Templates | Notes |
| --- | --- | --- |
| Equilibration (`prepare_equil`) | `mini.in`, `eqnvt.in`, `eqnpt0.in`, `eqnpt0-water.in`, `eqnpt.in`, `eqnpt-water.in`, `eqnpt-appear.in`, `eqnpt-disappear.in`, `mdin-equil` | `batter/_internal/ops/sim_files.py` copies these into each equilibration directory. The `*-water` variants are chosen when `sim.membrane_simulation` is `False`. |
| UNO/`z` component (SDR) | `mdin-unorest`, `mini-unorest`, `eqnpt0-uno.in`, `eqnpt-uno.in` | Used by `sim_files_z` for SDR-style windows. |
| UNO/`z` component (DD) | `mdin-unorest-dd`, `mini-unorest-dd`, `eqnpt0-uno.in`, `eqnpt-uno.in` | Same handler but the `-dd` templates are selected when `sim.dec_method == "dd"`. |
| Ligand-only `y` component | `mdin-unorest-lig`, `mini-unorest-lig`, `mini.in`, `eqnpt-lig.in`, `eqnpt0-lig.in` | Generated by `sim_files_y` for ligand decoupling windows. |
| Generic helper | `mini.in` | Also copied as `mini_eq.in` for UNO runs. |
| Box / tleap scaffolding | `tleap.in.amber16` (fallback `tleap.in`), `parmed-hmr.in` | `batter/_internal/ops/box.py` copies these when building full/vacuum systems and running the optional parmed HMR pass. |

The equilibration run script (`run-equil.bash`) executes the disappear â†’ appear
inputs after the standard ``eqnpt`` ladder, using the rendered `eqnpt_disappear.in`
and `eqnpt_appear.in` files produced above.
