version: 1
protocol: asfe
backend: local

create:
  system_name: adrb2_A_solv_fe
  ligand_input: reference/ligands_dict.json
  ligand_ff: openff-2.2.1
  retain_lig_prot: true
  param_charge: am1bcc
  overwrite: false
  solv_shell: 15.0
  water_model: TIP3P

run:
  output_folder: ASFE_simulations
  only_fe_preparation: false
  dry_run: false
  run_id: rep1
  max_workers: 8
  on_failure: prune
  email_on_completion: yuzhuang@stanford.edu
  slurm:
    partition: rondror
    time: "4:00:00"

fe_sim:
  # 24 lambda windows
  lambdas: [0.00, 0.04, 0.09, 0.13, 0.17, 0.22, 0.26, 0.30, 0.35, 0.39, 0.43, 0.48, 0.52, 0.57, 0.61, 0.65, 0.70, 0.74, 0.78, 0.83, 0.93, 0.97, 0.99, 1.00]  # MBAR
  # use rocklin correction 
  rocklin_correction: yes
  y_steps1: 5000
  y_steps2: 30000
  m_steps1: 5000
  m_steps2: 30000
  # total 10 * 30000 = 300000 steps -> 1.2 ns per window
  # non-bonded cutoff in Angstrom
  cut: 9.0
  # Monte Carlo barostat
  barostat: 2
  # use hydrogen mass repartitioning
  hmr: yes 
  # 4 fs time step with HMR
  dt: 0.004
  temperature: 298.15 
  # analysis only start from 4th extension (exclude the first three FE extensions)
  analysis_fe_range: [3, -1]
  # MBAR analysis blocks
  blocks: 5
