version: 1
protocol: abfe
backend: local

create:
  system_name: adrb2_A
  protein_input: ../reference/adrb2_A.pdb
  system_input: ../reference/adrb2_A_membrane.pdb
  system_coordinate: ../reference/adrb2_A_membrane.rst7
  protein_align: name CA and resid 50 to 200
  ligand_input: ../reference/ligands_dict.json
  ligand_ff: openff-2.2.1
  retain_lig_prot: true
  param_charge: am1bcc
  param_outdir: ligand_params

  anchor_atoms:
    - "name CA and resid 113"
    - "name CA and resid 82"
    - "name CA and resid 316"
  extra_restraints: >
    name CA and resid 50 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73
    126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141
    142 143 144 145 146 147 148 149 150 151 152 153
    217 218 219 220 221 222 223 224 225 226 227
    266 267 268 269 270 271 272 273 274 275 276 277 278
    323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344
  lipid_mol: ["POPC"]
  overwrite: false
  receptor_ff: protein.ff14SB
  lipid_ff: lipid21
  solv_shell: 15.0
  water_model: TIP3P

run:
  output_folder: adrb2_A_mabfe
  system_type: MABFE
  only_fe_preparation: false
  dry_run: false
  run_id: auto
  max_workers: 8
  on_failure: prune
  slurm:
    partition: owners
    time: "4:00:00"

fe_sim:
  lambdas: [0.00, 0.04, 0.09, 0.13, 0.17, 0.22, 0.26, 0.30, 0.35, 0.39, 0.43, 0.48, 0.52, 0.57, 0.61, 0.65, 0.70, 0.74, 0.78, 0.83, 0.93, 0.97, 0.99, 1.00]  # MBAR
  blocks: 5
  eq_steps: 10000
  steps1:
    z: 5000
  steps2:
    z: 30000
  cut: 9.0
  barostat: 1
  hmr: yes
  dt: 0.004
  temperature: 298.15
